---
interface Props {
  measurementId?: string;
}
const { measurementId = "G-Z72E04V1F9" } = Astro.props;
---

<script is:inline define:vars={{ measurementId }}>
  window.dataLayer = window.dataLayer || [];
  function gtag() {
    dataLayer.push(arguments);
  }

  function loadGoogleAnalytics() {
    if (window.__ga_loaded) return;
    window.__ga_loaded = true;

    var s = document.createElement("script");
    s.async = true;
    s.src = "https://www.googletagmanager.com/gtag/js?id=" + measurementId;
    document.head.appendChild(s);

    gtag("js", new Date());
    gtag("config", measurementId, {
      send_page_view: true,
    });
  }

  if (document.readyState !== "loading") {
    loadGoogleAnalytics();
  } else {
    document.addEventListener("DOMContentLoaded", loadGoogleAnalytics);
  }
</script>
