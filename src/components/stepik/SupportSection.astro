---
interface Card {
  title: string;
  text: string;
  icon?: string;
}
interface Img {
  src: string;
  alt?: string;
}

interface Props {
  id?: string;
  heading?: string;
  accent?: string;
  leftCards?: [Card, Card];
  rightTitle?: string;
  rightText?: string;
  rightImg?: Img;
  className?: string;
}

const {
  id = "support",
  heading = "А я точно справлюсь самостоятельно?",
  accent = "Да, конечно!",
  leftCards = [
    {
      title: "Готовимся с полного нуля",
      text: "Весь материал курса подготовлен так, что даже самый новичок в химии сможет овладеть им. Нужны лишь базовые школьные знания.",
      icon: "✔",
    },
    {
      title: "Задания идут от простого к сложному",
      text: "Все задания на модулях собраны так, чтобы вы могли тренироваться на простых и постепенно переходить к сложным!",
      icon: "✔",
    },
  ] as [Card, Card],
  rightTitle = "Ты не один, мы всегда рядом!",
  rightText = "Ты всегда можешь задать вопрос на платформе или в нашем дружном чате, где тебе всегда помогут и объяснят, как лучше поступить или решить задание!",
  rightImg = {
    src: "https://i.ibb.co/PZ89fycs/researcher.png",
    alt: "Иллюстрация исследователя",
  },
  className = "",
} = Astro.props as Props;
---

<!-- Секция участвует в глобальном вертикальном ритме -->
<div
  class={`section support ${className}`}
  id={id}
  aria-labelledby={`${id}-h`}
>
  <div class="support-inner">
    <div class="support-grid">
      <!-- ЛЕВАЯ КОЛОНКА -->
      <div class="support-left">
        <header class="support-left-top">
          <h2 id={`${id}-h`}>
            {heading}
            <span>{accent}</span>
          </h2>
        </header>

        <div class="support-left-bottom">
          {
            leftCards.map((c) => (
              <article class="support-card">
                <span class="support-icon" aria-hidden="true">
                  {c.icon ?? "✔"}
                </span>
                <div>
                  <h3 class="support-card-title">{c.title}</h3>
                  <p class="support-card-text">{c.text}</p>
                </div>
              </article>
            ))
          }
        </div>
      </div>

      <!-- ПРАВАЯ КОЛОНКА -->
      <aside class="support-right" aria-labelledby={`${id}-right-h`}>
        <div class="support-right-content">
          <h3 id={`${id}-right-h`}>{rightTitle}</h3>
          <p>{rightText}</p>
        </div>
        <img
          class="researcher"
          src={rightImg.src}
          alt={rightImg.alt ?? ""}
          loading="lazy"
          decoding="async"
        />
      </aside>
    </div>
  </div>

  <style>
    /* корень секции — БЕЗ своих внешних маргинов (их даёт .page-stack), центр как grid-child */
    .support {
      justify-self: center;
      inline-size: 100%;
      color: var(--black);
      font-family: var(--ff);
      background: transparent;
    }

    /* контейнер с горизонтальными отступами по токенам */
    .support-inner {
      max-width: var(--container);
      margin: 0 auto;
      padding: 0 var(--pad-desktop);
      box-sizing: border-box;
    }
    /* Планшет */
    @media (max-width: 1100px) {
      .support-inner {
        width: 100vw;
        margin-left: calc(50% - 50vw);
        margin-right: calc(50% - 50vw);
        max-width: none;
        padding: 0 var(--page-padding-tablet);
      }

      .support-content {
        padding: var(--space-40) var(--page-padding-tablet);
      }

      .support-title {
        font-size: var(--h2-size-tablet);
        margin-bottom: var(--space-24);
      }

      .support-grid {
        grid-template-columns: repeat(2, 1fr);
        gap: var(--space-24);
      }

      .support-item {
        padding: var(--space-20);
      }

      .support-item-title {
        font-size: var(--h3-size-tablet);
        margin-bottom: var(--space-12);
      }

      .support-item-text {
        font-size: var(--text-size-tablet);
        line-height: 1.5;
      }
    }

    /* Мобилка */
    @media (max-width: 600px) {
      .support-inner {
        width: 100vw;
        margin-left: calc(50% - 50vw);
        margin-right: calc(50% - 50vw);
        max-width: none;
        padding: 0 var(--page-padding-mobile);
      }

      .support-content {
        padding: var(--space-32) var(--page-padding-mobile);
      }

      .support-title {
        font-size: var(--h2-size-mobile);
        margin-bottom: var(--space-20);
      }

      .support-grid {
        grid-template-columns: 1fr;
        gap: var(--space-16);
      }

      .support-item {
        padding: var(--space-16);
      }

      .support-item-title {
        font-size: var(--h3-size-mobile);
        margin-bottom: var(--space-8);
      }

      .support-item-text {
        font-size: var(--text-size-mobile);
        line-height: 1.4;
      }
    }

    /* grid 2 колонки без переполнения, gap — по токену */
    .support-grid {
      display: grid;
      grid-template-columns: 7fr 3fr; /* ~70% / 30% без проблемы процентов + gap */
      gap: var(--space-20);
    }
    .support-grid > * {
      min-width: 0;
    }

    .support-left {
      display: grid;
      grid-template-rows: auto auto;
      gap: var(--space-20);
      min-width: 0;
    }

    /* верхний блок слева */
    .support-left-top {
      background: var(--white);
      border-radius: var(--radius-24);
      border: 1px solid var(--border);
      padding: 40px;
      display: flex;
      align-items: center;
      justify-content: flex-start;
      box-sizing: border-box;
    }
    .support-left-top h2 {
      font: 700 var(--h2) / 1.3 var(--ff);
      margin: 0;
    }
    .support-left-top h2 span {
      color: var(--blue);
    }

    /* нижние карточки слева */
    .support-left-bottom {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: var(--space-20);
    }
    .support-card {
      background: var(--white);
      border-radius: var(--radius-24);
      border: 1px solid var(--border);
      padding: 30px;
      display: flex;
      align-items: flex-start;
      gap: 10px;
      box-sizing: border-box;
    }
    .support-icon {
      color: var(--blue);
      font-size: 20px;
      margin-top: 4px;
      flex-shrink: 0;
    }
    .support-card-title {
      font: 600 18px/1.25 var(--ff);
      color: var(--blue);
      margin: 0 0 6px;
    }
    .support-card-text {
      font: 500 16px/1.5 var(--ff);
      color: #222;
      margin: 0;
    }

    /* правая колонка */
    .support-right {
      background: var(--blue);
      border-radius: var(--radius-24);
      display: flex;
      flex-direction: column;
      justify-content: space-between;
      padding: 40px;
      position: relative;
      overflow: hidden;
      min-height: 340px;
      color: #fff;
      box-sizing: border-box;
    }
    .support-right-content {
      z-index: 2;
      position: relative;
    }
    .support-right h3 {
      font: 700 26px/1.25 var(--ff);
      margin: 0 0 16px;
      color: #fff;
    }
    .support-right p {
      font: 500 16px/1.5 var(--ff);
      margin: 0;
      color: #fff;
    }
    .support-right img.researcher {
      position: absolute;
      bottom: -20px;
      right: 10px;
      inline-size: 150px;
      max-inline-size: 80%;
      z-index: 1;
      pointer-events: none;
      height: auto;
    }

    /* ---------- Планшеты (до 1100px) — синхронизируем с остальными компонентами ---------- */
    @media screen and (max-width: 1100px) {
      .support-inner {
        padding: 0 var(--pad-mobile);
      }

      .support-grid {
        display: flex;
        flex-direction: column;
        gap: var(--space-20);
        width: 100%;
        max-width: 100%;
        box-sizing: border-box;
      }

      .support-right img.researcher {
        display: none;
      }

      .support-left {
        order: 1;
      }
      .support-right {
        order: 2;
        padding: 24px;
        min-height: auto;
      }

      .support-left-top {
        padding: 20px;
      }
      .support-left-top h2 {
        font-size: 28px;
        line-height: 1.3;
      }

      .support-left-bottom {
        display: flex;
        flex-direction: column;
        gap: var(--space-20);
      }

      .support-card-title {
        font-size: 18px;
      }
      .support-card-text {
        font-size: 16px;
        line-height: 1.5;
      }

      .support-right h3 {
        font-size: 22px;
      }
      .support-right p {
        font-size: 16px;
        line-height: 1.5;
      }
    }

    /* ---------- Телефоны (до 600px) — исходная логика сохранена ---------- */
    @media screen and (max-width: 600px) {
      .support-inner {
        padding: 0 var(--pad-mobile);
      }

      .support-left-top h2 {
        font-size: 24px;
        line-height: 1.35;
      }
      .support-card-title {
        font-size: 16px;
      }
      .support-card-text {
        font-size: 15px;
        line-height: 1.45;
      }
      .support-right h3 {
        font-size: 20px;
      }
      .support-right p {
        font-size: 15px;
        line-height: 1.45;
      }
    }
  </style>
</div>
