---
interface CTA {
  href: string;
  text: string;
  variant?: "primary" | "ghost" | "secondary";
  target?: "_blank" | "_self" | "_parent" | "_top";
  rel?: string;
  ariaLabel?: string;
}
interface Image {
  src: string;
  alt: string;
  width?: number;
  height?: number;
}
interface Feature {
  title: string;
  text: string;
}
interface Props {
  id?: string;
  labels?: string[];
  title?: string;    // можно с <br>
  desc?: string;
  ctas?: CTA[];
  image?: Image;
  features?: Feature[];
}

const {
  id = "stepik-hero",
  labels = ["Курс", "Химия ЕГЭ 2025", "Неорганическая химия"],
  title = "Неорганическая химия<br>для ЕГЭ 2025",
  desc = "Неорганическая химия — это ~40% варианта. Научимся писать реакции (включая ОВР) и закрывать 6, 7, 8, 9, 24, 29–31.",
  ctas = [
    { href: "https://t.me/chemestrika", text: "Забронировать скидку", variant: "primary", target: "_blank", rel: "noopener" },
    { href: "/courses/inorganic", text: "Подробнее", variant: "ghost" },
  ],
  image = { src: "/images/mainpage/inorg-hero.png", alt: "Обложка курса", width: 1200, height: 800 },
  features = [
    { title: "Доступ к курсу",        text: "Остается навсегда" },
    { title: "+40 баллов на ЕГЭ",     text: "После курса увеличите свой результат" },
    { title: "1085 заданий на курсе", text: "Курс нацелен на практику, вы будете решать, а не учить" },
    { title: "Рейтинг курса 5⭐",      text: "На основании независимых оценок Stepik" },
  ],
} = Astro.props as Props;

const toBtnClass = (v?: CTA["variant"]) => {
  if (v === "primary") return "btn btn--primary";
  if (v === "secondary") return "btn btn--blue";
  return "btn btn--ghost";
};
---

<section class="section stepik-hero" aria-labelledby={`${id}-title`}>
  <div class="hero-inner">
    <article class="card hero-card">
      {/* Ярлыки */}
      {labels?.length > 0 && (
        <nav class="label-group" aria-label="Категории курса">
          {labels.map((l) => <span class="label">{l}</span>)}
        </nav>
      )}

      <div class="hero-grid">
        <div class="text">
          <h1 id={`${id}-title`} class="hero-title" set:html={title} />
          <p class="hero-desc">{desc}</p>

          <div class="buttons" role="group" aria-label="Действия на странице">
            {ctas.map((b) => (
              <a
                class={toBtnClass(b.variant)}
                href={b.href}
                target={b.target}
                rel={b.rel}
                aria-label={b.ariaLabel ?? b.text}
              >
                {b.text}
              </a>
            ))}
          </div>
        </div>

        <figure class="image-container">
          <img
            src={image.src}
            alt={image.alt}
            width={image.width ?? 1200}
            height={image.height ?? 800}
            loading="eager"
            decoding="async"
          />
        </figure>
      </div>

      <ul class="features" role="list">
        {features.map((f, i) => (
          <li class={`feature ${i === features.length - 1 ? "feature--accent" : ""}`}>
            <h3 class="feature-title">{f.title}</h3>
            <span class="feature-text">{f.text}</span>
          </li>
        ))}
      </ul>
    </article>
  </div>

  <style>
    /* ===== Контейнер как у оффера ===== */
    .stepik-hero{ font-family: var(--ff); }
    .hero-inner{
      max-width: var(--container);
      margin: 0 auto;
      padding: 0 var(--pad-desktop);
      box-sizing: border-box;
    }
    @media (max-width:1100px){
      .hero-inner{
        width: 100vw;
        margin-left: calc(50% - 50vw);
        margin-right: calc(50% - 50vw);
        max-width: none;
        padding: 0 var(--pad-mobile);
      }
    }
    @media (max-width:600px){
      .hero-inner{
        width: 100vw;
        margin-left: calc(50% - 50vw);
        margin-right: calc(50% - 50vw);
        max-width: none;
        padding: 0 var(--pad-mobile);
      }
    }

    /* ===== Карточка hero ===== */
    .hero-card{
      position: relative;
      overflow: hidden;
      padding: var(--space-50);
      border-radius: var(--radius-24);
      border: 1px solid var(--border);
      box-shadow: var(--shadow-1);
      background: var(--white);
    }
    .hero-card::before{
      content:"";
      position:absolute; inset:0; z-index:0;
      background:
        url("data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 1300 800'><path d='M 0 800 C 200 -600, 400 1000, 600 600 S 200 -500, 1500 300 S 200 -500, 2000 0' fill='none' stroke='%23366EF0' stroke-width='150' stroke-linecap='round' stroke-opacity='0.05'/></svg>")
        no-repeat center/cover;
    }
    .hero-card > *{ position:relative; z-index:1; }

    /* Ярлыки */
    .label-group{
      display:flex; flex-wrap:wrap; gap: var(--space-12);
      margin: 0 0 var(--space-20);
    }
    .label{
      background: var(--white);
      padding: 6px 14px;
      border-radius: 999px;
      font: 500 14px/1 var(--ff);
      border: 1px solid var(--border);
      color: var(--black);
    }

    /* Контентная сетка */
    .hero-grid{
      display:flex; gap: var(--space-40); flex-wrap:wrap; align-items:flex-start;
    }
    .text{ flex: 1 1 400px; min-width: 0; }
    .hero-title{
      margin: 0 0 var(--space-16);
      font-size: var(--h1);
      line-height: 1.15;
      color: var(--black);
      font-weight: 700;
    }
    .hero-desc{
      margin: 0 0 var(--space-32);
      font-size: var(--text);
      line-height: 1.6;
      color: var(--black);
      font-weight: 500;
    }

    /* Кнопки — глобальные */
    .buttons{ display:flex; gap: var(--space-16); flex-wrap:wrap; }
    .buttons .btn{ text-decoration: none; }

    /* Картинка справа */
    .image-container{
      flex: 1 1 300px;
      min-width: 0;
      display:flex; align-items:flex-end; justify-content:flex-end;
    }
    .image-container img{
      display:block; width: 100%; max-width:100%; height:auto;
      object-fit: contain; border-radius: 10px;
    }

    /* Фичи снизу */
    .features{
      display:flex; flex-wrap:wrap; justify-content:space-between;
      gap: var(--space-12);
      list-style:none; padding: var(--space-50) 0 0; margin: 0;
    }
    .feature{
      flex: 1 1 calc(25% - var(--space-12));
      min-width: 0;
      box-sizing:border-box;
      border-radius: 12px;
      padding: var(--space-20);
      color: var(--black);
      background: transparent;
      border: 1px solid var(--blue);
    }
    .feature--accent{
      background: var(--blue);
      border: none;
      color: var(--white);
    }
    .feature--accent .feature-text{ color: #eaf0ff; }
    .feature-title{
      margin:0 0 6px;
      font: 600 var(--h3)/1.25 var(--ff);
    }
    .feature-text{
      font: 500 var(--text)/1.5 var(--ff);
    }

    /* Адаптив */
    @media (max-width:1100px){
      .hero-card{ padding: 24px; }
      .image-container{ display:none !important; }
      .hero-grid{ flex-direction: column; gap: var(--space-20); }
      .features{
        display: grid; grid-template-columns: repeat(2, 1fr);
        gap: var(--space-20); padding-top: var(--space-40);
      }
      .feature{ min-width: 0; width: 100%; }
    }
    @media (max-width:600px){
      .buttons{ flex-wrap: wrap; justify-content: center; gap: var(--space-12); }
      .buttons .btn{
        flex: 1 1 auto; min-width: 0; max-width: 100%;
        white-space: normal; text-align: center;
      }
      .features{ grid-template-columns: 1fr; gap: var(--space-20); padding-top: var(--space-32); }
      .hero-title{ font-size: var(--h2); line-height: 1.25; }
    }
  </style>
</section>
