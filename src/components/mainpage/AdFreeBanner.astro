---
interface Img {
  src: string;
  width?: number;
  height?: number;
  alt: string;
}
interface Props {
  id?: string;
  title?: string;
  lead?: string;
  ctaText?: string;
  ctaHref?: string;
  image?: Img;
}
const {
  id = "ad-free",
  title = "Забирай бесплатные курсы по подготовке к ЕГЭ по химии 2026",
  lead = "Два курса, которые дадут тебе +30 баллов на экзамене. Забирай по кнопкам ниже",
  ctaText = "Забрать оба курса",
  ctaHref,
  image = {
    src: "/images/mainpage/adfree.webp",
    width: 400,
    height: 300,
    alt: "Превью бесплатного курса",
  },
} = Astro.props as Props;
---

<div class="section ad-free" aria-labelledby={`${id}-title`}>
  <div class="container">
    <div class="ad-free__card">
      <header class="ad-free__text">
        <div>
          <h2 id={`${id}-title`} class="ad-free__title">{title}</h2>
        </div>
        <div>
          <p class="ad-free__lead">{lead}</p>
        </div>
        <div>
          {
            ctaHref ? (
              <a
                href={ctaHref}
                target="_blank"
                rel="noopener noreferrer"
                class="btn btn--ghost"
                id="cta-adfree-A"
                data-source="adfree-hero"
                data-variant="A"
                data-campaign="free-courses"
                data-utm-source="site"
                data-utm-medium="cta"
                data-utm-campaign="adfree-hero"
                data-utm-content="btn-A"
              >
                {ctaText}
              </a>
            ) : (
              <button
                id="cta-adfree-A"
                type="button"
                class="btn btn--ghost popup-btn"
                data-popup-id="lead-popup"
                data-source="adfree-hero"
                data-variant="A"
                data-campaign="free-courses"
                data-utm-source="site"
                data-utm-medium="cta"
                data-utm-campaign="adfree-hero"
                data-utm-content="btn-A"
              >
                {ctaText}
              </button>
            )
          }
        </div>
      </header>

      <figure class="ad-free__figure">
        <img
          src={image.src}
          width={image.width ?? 400}
          height={image.height ?? 300}
          alt={image.alt}
          loading="lazy"
          decoding="async"
        />
      </figure>
    </div>
  </div>

  <style>
    .ad-free__card {
      display: grid;
      grid-template-columns: 1.6fr 0.8fr;
      gap: var(--space-32);
      align-items: center;
      background: var(--blue);
      color: var(--white);
      border-radius: var(--radius-24);
      border: 1px solid var(--border);
      box-shadow: var(--shadow-1);
      padding: var(--space-32);
    }
    .ad-free__text {
      display: flex;
      flex-direction: column;
      justify-content: space-between;
      gap: var(--space-24);
    }
    .ad-free__title {
      font-size: var(--h2);
      line-height: 1.25;
      margin: 0;
      color: var(--white);
    }
    .ad-free__lead {
      font-size: var(--lead);
      line-height: 1.45;
      margin: 0;
      color: var(--white);
    }
    .ad-free__cta {
      justify-self: start;
    }
    .ad-free__figure {
      margin: 0;
      justify-self: end;
      max-width: 400px;
    }
    .ad-free__figure img {
      display: block;
      width: 100%;
      height: auto;
      object-fit: contain;
    }

    @media (max-width: 1100px) {
      .ad-free__card {
        grid-template-columns: 1fr;
        gap: var(--space-24);
        padding: var(--space-24);
      }
      .ad-free__text {
        justify-items: center;
        text-align: center;
        max-width: 760px;
        margin-inline: auto;
      }
      .ad-free__cta {
        justify-self: center;
      }
      .ad-free__figure {
        justify-self: center;
      }
    }
    @media (max-width: 600px) {
      .ad-free__card {
        gap: var(--space-24);
        padding: var(--space-24);
      }
      .ad-free__text {
        max-width: 100%;
      }
    }
  </style>
</div>
