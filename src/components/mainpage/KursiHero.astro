---
/* src/components/KursiHero.astro
   Вариант без BLEED, с локальным .container и внутренними адаптивами.
   Использует только глобальные токены. */

interface Img {
  src: string;
  width?: number;
  height?: number;
  alt: string;
}

interface Props {
  id?: string;
  title?: string;
  highlight?: string;
  lead?: string;
  href1?: string;
  text1?: string;
  href2?: string;
  text2?: string;
  imgLeft?: Img;
  imgRight?: Img;
}

const origin = Astro.url.origin;
const pageUrl = `${origin}${Astro.url.pathname}`;

const {
  id = "kursi-hero",
  title = "Подготовим к ЕГЭ по химии 2026",
  highlight = "с нуля до 85+ и бюджета",
  lead = "Хочешь учиться в меде<br />или на химфаке?<br />Мы доведём до бюджета!",
  href1 = "#self-paced",
  text1 = "Узнать подробнее",
  href2 = "#self-paced",
  text2 = "Узнать подробнее",
  imgLeft = {
    src: "images/mainpage/heroleft.png",
    width: 550,
    height: 1100,
    alt: "Лаборантка с пробиркой",
  },
  imgRight = {
    src: "images/mainpage/heroright.jpg",
    width: 550,
    height: 1100,
    alt: "Студентка в медицинской форме",
  },
} = Astro.props as Props;
---

<div class="section kursi-hero" aria-labelledby={`${id}-title`}>
  <style>
    .kursi-hero {
      font-family: var(--ff);
    }

    /* Локальный контейнер (стандартный паттерн) */
    .container {
      max-width: var(--container);
      margin: 0 auto;
      padding: 0 var(--pad-desktop);
      box-sizing: border-box;
    }
    @media (max-width: 1100px) {
      .container {
        width: 100vw;
        margin-left: calc(50% - 50vw);
        margin-right: calc(50% - 50vw);
        max-width: none;
        padding: 0 var(--pad-mobile);
      }
    }
    @media (max-width: 600px) {
      .container {
        width: 100vw;
        margin-left: calc(50% - 50vw);
        margin-right: calc(50% - 50vw);
        max-width: none;
        padding: 0 var(--pad-mobile);
      }
    }

    /* Сетка секции */
    .kursi-hero__grid {
      display: flex;
      gap: var(--space-16);
      align-items: stretch;
    }
    .kursi-hero__left {
      display: flex;
      flex-direction: column;
      gap: var(--space-16);
      flex: 1 1 auto;
      min-width: 0;
    }
    .kursi-hero__right {
      display: flex;
      gap: var(--space-16);
      flex-shrink: 0;
    }

    /* Карточка с заголовком */
    .kursi-hero__main {
      padding: var(--space-32);
    }
    .kursi-hero__title {
      font-size: var(--h1);
      line-height: 1.15;
      margin: 0;
      color: var(--black);
      max-width: 22ch;
    }
    .kursi-hero__highlight {
      display: inline-block;
      margin-top: var(--space-12);
      padding: 6px 12px;
      border: 2px solid var(--blue);
      border-radius: 12px;
      font-weight: 700;
    }

    /* Оффер */
    .kursi-hero__offer {
      border: 2px solid var(--blue);
      border-radius: var(--radius-24);
      padding: var(--space-24);
      display: flex;
      flex-direction: column;
      gap: var(--space-16);
      background: #fff;
    }
    .kursi-hero__lead {
      margin: 0;
      font-size: clamp(20px, 3.6vw, 30px);
      line-height: 1.3;
      color: var(--black);
    }
    .kursi-hero__actions {
      display: flex;
      gap: var(--space-16);
      flex-wrap: wrap;
    }

    /* Изображения справа */
    .kursi-hero__img {
      width: 290px;
      aspect-ratio: 29 / 58; /* 1:2 */
      overflow: hidden;
      border-radius: var(--radius-24);
      margin: 0;
      background: #ddd;
      flex-shrink: 0;
    }
    .kursi-hero__img img {
      width: 100%;
      height: 100%;
      object-fit: cover;
      object-position: center;
      display: block;
    }

    /* ===== Адаптивы (локальные) ===== */

    /* ≤1100px — убираем правую колонку, левая на всю ширину */
    @media (max-width: 1100px) {
      .kursi-hero__right {
        display: none !important;
      }
      .kursi-hero__grid {
        flex-direction: column;
      }
      .kursi-hero__main {
        padding: var(--space-24);
      }
      .kursi-hero__offer {
        padding: var(--space-20);
      }
      .kursi-hero__actions {
        gap: var(--space-12);
      }
    }

    /* ≤600px — компактные кнопки, перенос текста безопасный */
    @media (max-width: 600px) {
      .kursi-hero__title,
      .kursi-hero__lead {
        overflow-wrap: anywhere;
      }
      .kursi-hero__actions {
        gap: var(--space-12);
        flex-wrap: wrap;
      }
    }
  </style>

  <div class="container">
    <div class="kursi-hero__grid">
      <!-- Левая колонка -->
      <div class="kursi-hero__left">
        <!-- Белая карточка с заголовком -->
        <article class="card kursi-hero__main">
          <h1 id={`${id}-title`} class="kursi-hero__title">
            {title}
            <span class="kursi-hero__highlight">{highlight}</span>
          </h1>
        </article>

        <!-- Карточка с оффером -->
        <article class="kursi-hero__offer">
          <p class="kursi-hero__lead" set:html={lead} />
          <div class="kursi-hero__actions" role="group" aria-label="Действия">
            <a href={href1} class="btn btn--blue" aria-label={text1}>{text1}</a>
            <a href={href2} class="btn btn--primary" aria-label={text2}
              >{text2}</a
            >
          </div>
        </article>
      </div>

      <!-- Правая колонка (изображения) -->
      <div class="kursi-hero__right" aria-hidden="true">
        <figure class="kursi-hero__img">
          <img
            src={imgLeft.src}
            width={imgLeft.width ?? 550}
            height={imgLeft.height ?? 1100}
            alt={imgLeft.alt}
          />
        </figure>
        <figure class="kursi-hero__img">
          <img
            src={imgRight.src}
            width={imgRight.width ?? 550}
            height={imgRight.height ?? 1100}
            alt={imgRight.alt}
          />
        </figure>
      </div>
    </div>
  </div>
</div>
